# Ansible inventory file for IAM HA Stack - PostgreSQL + PATRONI ARCHITECTURE
[bastion]
bastion1 ansible_host=193.136.194.103 ansible_user=shahadat keepalived_state=MASTER keepalived_priority=150
bastion2 ansible_host=193.136.194.104 ansible_user=shahadat keepalived_state=BACKUP keepalived_priority=100

[postgres_cluster]
backend1 ansible_host=172.29.65.52 ansible_user=shahadat keepalived_state=MASTER keepalived_priority=150 postgres_role=cluster postgres_node_id=1 patroni_name=patroni-1 ansible_ssh_common_args='-o ProxyCommand="ssh -A -W %h:%p -q shahadat@193.136.194.103" -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
backend2 ansible_host=172.29.65.53 ansible_user=shahadat keepalived_state=BACKUP keepalived_priority=150 postgres_role=cluster postgres_node_id=2 patroni_name=patroni-2 ansible_ssh_common_args='-o ProxyCommand="ssh -A -W %h:%p -q shahadat@193.136.194.104" -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
backend3 ansible_host=172.29.65.54 ansible_user=shahadat keepalived_state=BACKUP keepalived_priority=100 postgres_role=cluster postgres_node_id=3 patroni_name=patroni-3 ansible_ssh_common_args='-o ProxyCommand="ssh -A -W %h:%p -q shahadat@193.136.194.103" -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'

[etcd_cluster]
backend1 ansible_host=172.29.65.52 ansible_user=shahadat etcd_name=etcd-1
backend2 ansible_host=172.29.65.53 ansible_user=shahadat etcd_name=etcd-2  
backend3 ansible_host=172.29.65.54 ansible_user=shahadat etcd_name=etcd-3

[backend:children]
postgres_cluster

[all:vars]
ansible_ssh_private_key_file=~/.ssh/id_ed25519
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o ForwardAgent=yes'